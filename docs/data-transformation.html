<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data transformation | Income Variation</title>
  <meta name="description" content="3 Data transformation | Income Variation" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data transformation | Income Variation" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data transformation | Income Variation" />
  
  
  

<meta name="author" content="Bowen Liang" />


<meta name="date" content="2023-04-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">incomevar</a></li>
<li class="divider"></li>
<li><a href="index.html#introduction" id="toc-introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="data-sources.html#data-sources" id="toc-data-sources"><span class="toc-section-number">2</span> Data sources</a></li>
<li><a href="data-transformation.html#data-transformation" id="toc-data-transformation"><span class="toc-section-number">3</span> Data transformation</a>
<ul>
<li><a href="data-transformation.html#the-transformation-process-for-fm_ern" id="toc-the-transformation-process-for-fm_ern"><span class="toc-section-number">3.1</span> The Transformation Process for fm_ern</a></li>
<li><a href="data-transformation.html#the-transformation-process-for-house_67_20" id="toc-the-transformation-process-for-house_67_20"><span class="toc-section-number">3.2</span> The Transformation Process for house_67_20</a></li>
<li><a href="data-transformation.html#the-transformation-process-for-data_15_16-data_17_18-and-data_19_20" id="toc-the-transformation-process-for-data_15_16-data_17_18-and-data_19_20"><span class="toc-section-number">3.3</span> The Transformation Process for data_15_16, data_17_18 and data_19_20</a></li>
<li><a href="data-transformation.html#the-transformation-process-for-shape-of-employment-in-nonagricultural-for-female" id="toc-the-transformation-process-for-shape-of-employment-in-nonagricultural-for-female"><span class="toc-section-number">3.4</span> The transformation process for Shape of Employment in Nonagricultural for Female</a></li>
</ul></li>
<li><a href="missing-values.html#missing-values" id="toc-missing-values"><span class="toc-section-number">4</span> Missing values</a></li>
<li><a href="results.html#results" id="toc-results"><span class="toc-section-number">5</span> Results</a>
<ul>
<li><a href="results.html#gender-influence-in-income" id="toc-gender-influence-in-income"><span class="toc-section-number">5.1</span> Gender Influence in Income</a></li>
<li><a href="results.html#race-influence-in-income" id="toc-race-influence-in-income"><span class="toc-section-number">5.2</span> Race influence in Income</a></li>
<li><a href="results.html#other-influence-in-income" id="toc-other-influence-in-income"><span class="toc-section-number">5.3</span> Other Influence in Income</a></li>
</ul></li>
<li><a href="interactive-component.html#interactive-component" id="toc-interactive-component"><span class="toc-section-number">6</span> Interactive component</a></li>
<li><a href="conclusion.html#conclusion" id="toc-conclusion"><span class="toc-section-number">7</span> Conclusion</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Income Variation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Data transformation</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-transformation.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="data-transformation.html#cb1-2" aria-hidden="true" tabindex="-1"></a>data_15_16 <span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;./data/Income and Earnings Summary Measures2015 and 2016.xls&quot;</span>)</span></code></pre></div>
<pre><code>## New names:
## * `` -&gt; ...2
## * `` -&gt; ...3
## * `` -&gt; ...4
## * `` -&gt; ...5
## * `` -&gt; ...6
## * … and 3 more problems</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-transformation.html#cb3-1" aria-hidden="true" tabindex="-1"></a>data_17_18 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;./data/Income Summary Measures 2017 and 2018.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## New names:
## * `` -&gt; ...2
## * `` -&gt; ...3
## * `` -&gt; ...4
## * `` -&gt; ...5
## * `` -&gt; ...6
## * … and 3 more problems</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-transformation.html#cb5-1" aria-hidden="true" tabindex="-1"></a>data_19_20 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;./data/Income Summary Measures 2019 and 2020.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## New names:
## * `` -&gt; ...2
## * `` -&gt; ...3
## * `` -&gt; ...4
## * `` -&gt; ...5
## * `` -&gt; ...6
## * … and 3 more problems</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-transformation.html#cb7-1" aria-hidden="true" tabindex="-1"></a>fm_ern <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;./data/Female_Male Earnings 1960 to 2020.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## New names:
## * `` -&gt; ...2
## * `` -&gt; ...3
## * `` -&gt; ...4
## * `` -&gt; ...5
## * `` -&gt; ...6
## * … and 12 more problems</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-transformation.html#cb9-1" aria-hidden="true" tabindex="-1"></a>house_67_20 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;./data/Households by Race 1967 to 2020.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## New names:
## * `` -&gt; ...2
## * `` -&gt; ...3
## * `` -&gt; ...4
## * `` -&gt; ...5
## * `` -&gt; ...6
## * … and 10 more problems</code></pre>
<div id="the-transformation-process-for-fm_ern" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> The Transformation Process for fm_ern</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-transformation.html#cb11-1" aria-hidden="true" tabindex="-1"></a>fm_ern <span class="ot">&lt;-</span> fm_ern[<span class="dv">7</span><span class="sc">:</span><span class="dv">69</span>,]</span>
<span id="cb11-2"><a href="data-transformation.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="data-transformation.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(fm_ern)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>, </span>
<span id="cb11-4"><a href="data-transformation.html#cb11-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;total_workers_num_male&quot;</span>,<span class="st">&quot;total_workers_num_male_we&quot;</span>,<span class="st">&quot;total_median_earn_male&quot;</span>,<span class="st">&quot;MOE1&quot;</span>,</span>
<span id="cb11-5"><a href="data-transformation.html#cb11-5" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;total_workers_num_female&quot;</span>,<span class="st">&quot;total_workers_num_female_we&quot;</span>,<span class="st">&quot;total_median_earn_female&quot;</span>,<span class="st">&quot;MOE2&quot;</span>,</span>
<span id="cb11-6"><a href="data-transformation.html#cb11-6" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;ft_workers_num_male&quot;</span>,<span class="st">&quot;ft_workers_num_male_we&quot;</span>,<span class="st">&quot;ft_median_earn_male&quot;</span>,<span class="st">&quot;MOE3&quot;</span>,</span>
<span id="cb11-7"><a href="data-transformation.html#cb11-7" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;ft_workers_num_female&quot;</span>,<span class="st">&quot;ft_workers_num_female_we&quot;</span>,<span class="st">&quot;ft_median_earn_female&quot;</span>,<span class="st">&quot;MOE4&quot;</span>,</span>
<span id="cb11-8"><a href="data-transformation.html#cb11-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;F/M_earn_ratio&quot;</span></span>
<span id="cb11-9"><a href="data-transformation.html#cb11-9" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb11-10"><a href="data-transformation.html#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="data-transformation.html#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="data-transformation.html#cb11-12" aria-hidden="true" tabindex="-1"></a>fm_ern<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">substr</span>(fm_ern<span class="sc">$</span>Year,<span class="dv">1</span>,<span class="dv">4</span>)</span>
<span id="cb11-13"><a href="data-transformation.html#cb11-13" aria-hidden="true" tabindex="-1"></a>fm_ern <span class="ot">&lt;-</span> fm_ern[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">10</span>),]</span>
<span id="cb11-14"><a href="data-transformation.html#cb11-14" aria-hidden="true" tabindex="-1"></a>fm_ern <span class="ot">&lt;-</span> fm_ern[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">13</span>,<span class="dv">17</span>)]</span>
<span id="cb11-15"><a href="data-transformation.html#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(fm_ern,<span class="st">&quot;./data_train/fm_ern_new.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>,<span class="at">col.names=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in write.csv(fm_ern, &quot;./data_train/fm_ern_new.csv&quot;, row.names = FALSE, :
## attempt to set &#39;col.names&#39; ignored</code></pre>
<pre><code>## Warning in write.csv(fm_ern, &quot;./data_train/fm_ern_new.csv&quot;, row.names = FALSE, :
## attempt to set &#39;sep&#39; ignored</code></pre>
<p>In fm_ern, since the raw data was collected in excel format, which contains text description in the first and last few rows, these unhelpful rows are deleted first. When reading the excel into R, the column names are default defined as some values, renaming column names is the next step to create data easier for understanding. In the “Year” column of the original data, some cells have corner scales, and after looking into the data we can conclude this is not significant because only two years appear twice, so the first row occurred from each duplicated “Year” is selected. Last, since the margin of error is not taken into consideration in this analysis, getting rid of columns associated with the margin of error is the last step.</p>
</div>
<div id="the-transformation-process-for-house_67_20" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> The Transformation Process for house_67_20</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-transformation.html#cb14-1" aria-hidden="true" tabindex="-1"></a>house_67_20<span class="ot">&lt;-</span>house_67_20[<span class="dv">5</span><span class="sc">:</span><span class="dv">364</span>,]</span>
<span id="cb14-2"><a href="data-transformation.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># left inclued, right open</span></span>
<span id="cb14-3"><a href="data-transformation.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(house_67_20) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>,<span class="st">&quot;num_thous&quot;</span>,<span class="st">&quot;total&quot;</span>,<span class="st">&quot;under15_perc&quot;</span>,<span class="st">&quot;15_25_perc&quot;</span>,<span class="st">&quot;25_35_perc&quot;</span>,</span>
<span id="cb14-4"><a href="data-transformation.html#cb14-4" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;35_50_perc&quot;</span>,<span class="st">&quot;50_75_perc&quot;</span>,<span class="st">&quot;75_100_perc&quot;</span>,<span class="st">&quot;100_150_perc&quot;</span>,<span class="st">&quot;150_200_perc&quot;</span>,</span>
<span id="cb14-5"><a href="data-transformation.html#cb14-5" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;above200_perc&quot;</span>, <span class="st">&quot;median_income&quot;</span>, <span class="st">&quot;MOE1&quot;</span>,<span class="st">&quot;mean_income&quot;</span>,<span class="st">&quot;MOE2&quot;</span>)</span>
<span id="cb14-6"><a href="data-transformation.html#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="data-transformation.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># add a categorical column</span></span>
<span id="cb14-8"><a href="data-transformation.html#cb14-8" aria-hidden="true" tabindex="-1"></a>vec<span class="ot">&lt;-</span><span class="fu">c</span>()</span>
<span id="cb14-9"><a href="data-transformation.html#cb14-9" aria-hidden="true" tabindex="-1"></a>len<span class="ot">&lt;-</span><span class="fu">nrow</span>(house_67_20)</span>
<span id="cb14-10"><a href="data-transformation.html#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>len){</span>
<span id="cb14-11"><a href="data-transformation.html#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(house_67_20<span class="sc">$</span>num_thous[i])){</span>
<span id="cb14-12"><a href="data-transformation.html#cb14-12" aria-hidden="true" tabindex="-1"></a>    vec <span class="ot">&lt;-</span> <span class="fu">c</span>(vec,i)</span>
<span id="cb14-13"><a href="data-transformation.html#cb14-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-14"><a href="data-transformation.html#cb14-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-15"><a href="data-transformation.html#cb14-15" aria-hidden="true" tabindex="-1"></a>vec<span class="ot">&lt;-</span><span class="fu">c</span>(vec,len)</span>
<span id="cb14-16"><a href="data-transformation.html#cb14-16" aria-hidden="true" tabindex="-1"></a>dif_vec <span class="ot">&lt;-</span> <span class="fu">diff</span>(vec)</span>
<span id="cb14-17"><a href="data-transformation.html#cb14-17" aria-hidden="true" tabindex="-1"></a>race_col <span class="ot">&lt;-</span><span class="fu">c</span>()</span>
<span id="cb14-18"><a href="data-transformation.html#cb14-18" aria-hidden="true" tabindex="-1"></a>n<span class="ot">&lt;-</span><span class="fu">length</span>(dif_vec)</span>
<span id="cb14-19"><a href="data-transformation.html#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n){</span>
<span id="cb14-20"><a href="data-transformation.html#cb14-20" aria-hidden="true" tabindex="-1"></a>  row<span class="ot">&lt;-</span>vec[j]</span>
<span id="cb14-21"><a href="data-transformation.html#cb14-21" aria-hidden="true" tabindex="-1"></a>  race_col<span class="ot">&lt;-</span> <span class="fu">c</span>(race_col,<span class="fu">rep</span>(<span class="fu">t</span>(house_67_20[row,<span class="dv">1</span>]),dif_vec[j]))</span>
<span id="cb14-22"><a href="data-transformation.html#cb14-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-23"><a href="data-transformation.html#cb14-23" aria-hidden="true" tabindex="-1"></a>house_67_20<span class="sc">$</span>race_cate <span class="ot">&lt;-</span><span class="fu">c</span>(race_col,<span class="st">&quot;HISPANIC (ANY RACE) 28&quot;</span>)</span>
<span id="cb14-24"><a href="data-transformation.html#cb14-24" aria-hidden="true" tabindex="-1"></a>house_67_20 <span class="ot">&lt;-</span> house_67_20[<span class="sc">-</span>vec[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vec)<span class="sc">-</span><span class="dv">1</span>],]</span>
<span id="cb14-25"><a href="data-transformation.html#cb14-25" aria-hidden="true" tabindex="-1"></a>house_67_20<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">substr</span>(house_67_20<span class="sc">$</span>Year,<span class="dv">1</span>,<span class="dv">4</span>)</span>
<span id="cb14-26"><a href="data-transformation.html#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(house_67_20,<span class="st">&quot;./data_train/house_67_20_new.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>,<span class="at">col.names=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in write.csv(house_67_20, &quot;./data_train/house_67_20_new.csv&quot;, row.names
## = FALSE, : attempt to set &#39;col.names&#39; ignored</code></pre>
<pre><code>## Warning in write.csv(house_67_20, &quot;./data_train/house_67_20_new.csv&quot;, row.names
## = FALSE, : attempt to set &#39;sep&#39; ignored</code></pre>
<p>In house_67_20, we first delete the uncorrelated descriptive text rows as fm_ern, then rename the column name. In the original excel data set, the race is categorized by row, so we deleted the row indicated race and add a new race column at the end to make the data set suitable for graphics in ggplot2.</p>
</div>
<div id="the-transformation-process-for-data_15_16-data_17_18-and-data_19_20" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> The Transformation Process for data_15_16, data_17_18 and data_19_20</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-transformation.html#cb17-1" aria-hidden="true" tabindex="-1"></a>data_15_household <span class="ot">&lt;-</span> data_15_16[<span class="dv">9</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb17-2"><a href="data-transformation.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_15_household) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Type of Households&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb17-3"><a href="data-transformation.html#cb17-3" aria-hidden="true" tabindex="-1"></a>data_15_household<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2015</span>,<span class="dv">7</span>)</span>
<span id="cb17-4"><a href="data-transformation.html#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="data-transformation.html#cb17-5" aria-hidden="true" tabindex="-1"></a>data_16_household <span class="ot">&lt;-</span> data_15_16[<span class="dv">9</span><span class="sc">:</span><span class="dv">15</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb17-6"><a href="data-transformation.html#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_16_household) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Type of Households&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb17-7"><a href="data-transformation.html#cb17-7" aria-hidden="true" tabindex="-1"></a>data_16_household<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2016</span>,<span class="dv">7</span>)</span>
<span id="cb17-8"><a href="data-transformation.html#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="data-transformation.html#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="data-transformation.html#cb17-10" aria-hidden="true" tabindex="-1"></a>data_17_household <span class="ot">&lt;-</span> data_17_18[<span class="dv">9</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] </span>
<span id="cb17-11"><a href="data-transformation.html#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_17_household) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Type of Households&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb17-12"><a href="data-transformation.html#cb17-12" aria-hidden="true" tabindex="-1"></a>data_17_household<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2017</span>,<span class="dv">7</span>)</span>
<span id="cb17-13"><a href="data-transformation.html#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="data-transformation.html#cb17-14" aria-hidden="true" tabindex="-1"></a>data_18_household <span class="ot">&lt;-</span> data_17_18[<span class="dv">9</span><span class="sc">:</span><span class="dv">15</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb17-15"><a href="data-transformation.html#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_18_household) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Type of Households&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb17-16"><a href="data-transformation.html#cb17-16" aria-hidden="true" tabindex="-1"></a>data_18_household<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2018</span>,<span class="dv">7</span>)</span>
<span id="cb17-17"><a href="data-transformation.html#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="data-transformation.html#cb17-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-19"><a href="data-transformation.html#cb17-19" aria-hidden="true" tabindex="-1"></a>data_19_household <span class="ot">&lt;-</span> data_19_20[<span class="dv">9</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb17-20"><a href="data-transformation.html#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_19_household) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Type of Households&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb17-21"><a href="data-transformation.html#cb17-21" aria-hidden="true" tabindex="-1"></a>data_19_household<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2019</span>,<span class="dv">7</span>)</span>
<span id="cb17-22"><a href="data-transformation.html#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="data-transformation.html#cb17-23" aria-hidden="true" tabindex="-1"></a>data_20_household <span class="ot">&lt;-</span> data_19_20[<span class="dv">9</span><span class="sc">:</span><span class="dv">15</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb17-24"><a href="data-transformation.html#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_20_household) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Type of Households&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb17-25"><a href="data-transformation.html#cb17-25" aria-hidden="true" tabindex="-1"></a>data_20_household<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2020</span>,<span class="dv">7</span>)</span>
<span id="cb17-26"><a href="data-transformation.html#cb17-26" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb17-27"><a href="data-transformation.html#cb17-27" aria-hidden="true" tabindex="-1"></a>data_15_20_household <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_15_household,data_16_household,data_17_household,data_18_household,data_19_household,data_20_household)</span>
<span id="cb17-28"><a href="data-transformation.html#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="data-transformation.html#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_15_20_household,<span class="st">&quot;./data_train/data_15_20_household.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>,<span class="at">col.names=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in write.csv(data_15_20_household, &quot;./data_train/
## data_15_20_household.csv&quot;, : attempt to set &#39;col.names&#39; ignored</code></pre>
<pre><code>## Warning in write.csv(data_15_20_household, &quot;./data_train/
## data_15_20_household.csv&quot;, : attempt to set &#39;sep&#39; ignored</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-transformation.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#race</span></span>
<span id="cb20-2"><a href="data-transformation.html#cb20-2" aria-hidden="true" tabindex="-1"></a>data_15_race <span class="ot">&lt;-</span> data_15_16[<span class="dv">17</span><span class="sc">:</span><span class="dv">21</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb20-3"><a href="data-transformation.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_15_race)<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Race&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb20-4"><a href="data-transformation.html#cb20-4" aria-hidden="true" tabindex="-1"></a>data_15_race<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2015</span>,<span class="dv">5</span>)</span>
<span id="cb20-5"><a href="data-transformation.html#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="data-transformation.html#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="data-transformation.html#cb20-7" aria-hidden="true" tabindex="-1"></a>data_16_race <span class="ot">&lt;-</span> data_15_16[<span class="dv">17</span><span class="sc">:</span><span class="dv">21</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb20-8"><a href="data-transformation.html#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_16_race) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Race&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb20-9"><a href="data-transformation.html#cb20-9" aria-hidden="true" tabindex="-1"></a>data_16_race<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2016</span>,<span class="dv">5</span>)</span>
<span id="cb20-10"><a href="data-transformation.html#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="data-transformation.html#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="data-transformation.html#cb20-12" aria-hidden="true" tabindex="-1"></a>data_17_race <span class="ot">&lt;-</span> data_17_18[<span class="dv">17</span><span class="sc">:</span><span class="dv">21</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] </span>
<span id="cb20-13"><a href="data-transformation.html#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_17_race) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Race&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb20-14"><a href="data-transformation.html#cb20-14" aria-hidden="true" tabindex="-1"></a>data_17_race<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2017</span>,<span class="dv">5</span>)</span>
<span id="cb20-15"><a href="data-transformation.html#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="data-transformation.html#cb20-16" aria-hidden="true" tabindex="-1"></a>data_18_race <span class="ot">&lt;-</span> data_17_18[<span class="dv">17</span><span class="sc">:</span><span class="dv">21</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb20-17"><a href="data-transformation.html#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_18_race) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Race&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb20-18"><a href="data-transformation.html#cb20-18" aria-hidden="true" tabindex="-1"></a>data_18_race<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2018</span>,<span class="dv">5</span>)</span>
<span id="cb20-19"><a href="data-transformation.html#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="data-transformation.html#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="data-transformation.html#cb20-21" aria-hidden="true" tabindex="-1"></a>data_19_race <span class="ot">&lt;-</span> data_19_20[<span class="dv">17</span><span class="sc">:</span><span class="dv">21</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb20-22"><a href="data-transformation.html#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_19_race) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Race&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb20-23"><a href="data-transformation.html#cb20-23" aria-hidden="true" tabindex="-1"></a>data_19_race<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2019</span>,<span class="dv">5</span>)</span>
<span id="cb20-24"><a href="data-transformation.html#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="data-transformation.html#cb20-25" aria-hidden="true" tabindex="-1"></a>data_20_race <span class="ot">&lt;-</span> data_19_20[<span class="dv">17</span><span class="sc">:</span><span class="dv">21</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb20-26"><a href="data-transformation.html#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_20_race) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Race&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb20-27"><a href="data-transformation.html#cb20-27" aria-hidden="true" tabindex="-1"></a>data_20_race<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2020</span>,<span class="dv">5</span>)</span>
<span id="cb20-28"><a href="data-transformation.html#cb20-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-29"><a href="data-transformation.html#cb20-29" aria-hidden="true" tabindex="-1"></a>data_15_20_race <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_15_race,data_16_race,data_17_race,data_18_race,data_19_race,data_20_race)</span>
<span id="cb20-30"><a href="data-transformation.html#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_15_20_race,<span class="st">&quot;./data_train/data_15_20_race.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>,<span class="at">col.names=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in write.csv(data_15_20_race, &quot;./data_train/data_15_20_race.csv&quot;, :
## attempt to set &#39;col.names&#39; ignored</code></pre>
<pre><code>## Warning in write.csv(data_15_20_race, &quot;./data_train/data_15_20_race.csv&quot;, :
## attempt to set &#39;sep&#39; ignored</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-transformation.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#age</span></span>
<span id="cb23-2"><a href="data-transformation.html#cb23-2" aria-hidden="true" tabindex="-1"></a>data_15_age <span class="ot">&lt;-</span> data_15_16[<span class="dv">23</span><span class="sc">:</span><span class="dv">29</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb23-3"><a href="data-transformation.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_15_age)<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb23-4"><a href="data-transformation.html#cb23-4" aria-hidden="true" tabindex="-1"></a>data_15_age<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2015</span>,<span class="dv">7</span>)</span>
<span id="cb23-5"><a href="data-transformation.html#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="data-transformation.html#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="data-transformation.html#cb23-7" aria-hidden="true" tabindex="-1"></a>data_16_age <span class="ot">&lt;-</span> data_15_16[<span class="dv">23</span><span class="sc">:</span><span class="dv">29</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb23-8"><a href="data-transformation.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_16_age) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb23-9"><a href="data-transformation.html#cb23-9" aria-hidden="true" tabindex="-1"></a>data_16_age<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2016</span>,<span class="dv">7</span>)</span>
<span id="cb23-10"><a href="data-transformation.html#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="data-transformation.html#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="data-transformation.html#cb23-12" aria-hidden="true" tabindex="-1"></a>data_17_age <span class="ot">&lt;-</span> data_17_18[<span class="dv">23</span><span class="sc">:</span><span class="dv">29</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] </span>
<span id="cb23-13"><a href="data-transformation.html#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_17_age) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb23-14"><a href="data-transformation.html#cb23-14" aria-hidden="true" tabindex="-1"></a>data_17_age<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2017</span>,<span class="dv">7</span>)</span>
<span id="cb23-15"><a href="data-transformation.html#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="data-transformation.html#cb23-16" aria-hidden="true" tabindex="-1"></a>data_18_age <span class="ot">&lt;-</span> data_17_18[<span class="dv">23</span><span class="sc">:</span><span class="dv">29</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb23-17"><a href="data-transformation.html#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_18_age) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb23-18"><a href="data-transformation.html#cb23-18" aria-hidden="true" tabindex="-1"></a>data_18_age<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2018</span>,<span class="dv">7</span>)</span>
<span id="cb23-19"><a href="data-transformation.html#cb23-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-20"><a href="data-transformation.html#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="data-transformation.html#cb23-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-22"><a href="data-transformation.html#cb23-22" aria-hidden="true" tabindex="-1"></a>data_19_age <span class="ot">&lt;-</span> data_19_20[<span class="dv">23</span><span class="sc">:</span><span class="dv">29</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb23-23"><a href="data-transformation.html#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_19_age) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb23-24"><a href="data-transformation.html#cb23-24" aria-hidden="true" tabindex="-1"></a>data_19_age<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2019</span>,<span class="dv">7</span>)</span>
<span id="cb23-25"><a href="data-transformation.html#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="data-transformation.html#cb23-26" aria-hidden="true" tabindex="-1"></a>data_20_age <span class="ot">&lt;-</span> data_19_20[<span class="dv">23</span><span class="sc">:</span><span class="dv">29</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb23-27"><a href="data-transformation.html#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_20_age) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb23-28"><a href="data-transformation.html#cb23-28" aria-hidden="true" tabindex="-1"></a>data_20_age<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2020</span>,<span class="dv">7</span>)</span>
<span id="cb23-29"><a href="data-transformation.html#cb23-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-30"><a href="data-transformation.html#cb23-30" aria-hidden="true" tabindex="-1"></a>data_15_20_age <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_15_age,data_16_age,data_17_age,data_18_age,data_19_age,data_20_age)</span>
<span id="cb23-31"><a href="data-transformation.html#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_15_20_age,<span class="st">&quot;./data_train/data_15_20_age.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>,<span class="at">col.names=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in write.csv(data_15_20_age, &quot;./data_train/data_15_20_age.csv&quot;, :
## attempt to set &#39;col.names&#39; ignored</code></pre>
<pre><code>## Warning in write.csv(data_15_20_age, &quot;./data_train/data_15_20_age.csv&quot;, :
## attempt to set &#39;sep&#39; ignored</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-transformation.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#region</span></span>
<span id="cb26-2"><a href="data-transformation.html#cb26-2" aria-hidden="true" tabindex="-1"></a>data_15_region <span class="ot">&lt;-</span> data_15_16[<span class="dv">36</span><span class="sc">:</span><span class="dv">39</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb26-3"><a href="data-transformation.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_15_region)<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb26-4"><a href="data-transformation.html#cb26-4" aria-hidden="true" tabindex="-1"></a>data_15_region<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2015</span>,<span class="dv">4</span>)</span>
<span id="cb26-5"><a href="data-transformation.html#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="data-transformation.html#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="data-transformation.html#cb26-7" aria-hidden="true" tabindex="-1"></a>data_16_region <span class="ot">&lt;-</span> data_15_16[<span class="dv">36</span><span class="sc">:</span><span class="dv">39</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb26-8"><a href="data-transformation.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_16_region) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb26-9"><a href="data-transformation.html#cb26-9" aria-hidden="true" tabindex="-1"></a>data_16_region<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2016</span>,<span class="dv">4</span>)</span>
<span id="cb26-10"><a href="data-transformation.html#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="data-transformation.html#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="data-transformation.html#cb26-12" aria-hidden="true" tabindex="-1"></a>data_17_region <span class="ot">&lt;-</span> data_17_18[<span class="dv">36</span><span class="sc">:</span><span class="dv">39</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] </span>
<span id="cb26-13"><a href="data-transformation.html#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_17_region) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb26-14"><a href="data-transformation.html#cb26-14" aria-hidden="true" tabindex="-1"></a>data_17_region<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2017</span>,<span class="dv">4</span>)</span>
<span id="cb26-15"><a href="data-transformation.html#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="data-transformation.html#cb26-16" aria-hidden="true" tabindex="-1"></a>data_18_region <span class="ot">&lt;-</span> data_17_18[<span class="dv">36</span><span class="sc">:</span><span class="dv">39</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb26-17"><a href="data-transformation.html#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_18_region) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb26-18"><a href="data-transformation.html#cb26-18" aria-hidden="true" tabindex="-1"></a>data_18_region<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2018</span>,<span class="dv">4</span>)</span>
<span id="cb26-19"><a href="data-transformation.html#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="data-transformation.html#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="data-transformation.html#cb26-21" aria-hidden="true" tabindex="-1"></a>data_19_region <span class="ot">&lt;-</span> data_19_20[<span class="dv">36</span><span class="sc">:</span><span class="dv">39</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb26-22"><a href="data-transformation.html#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_19_region) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb26-23"><a href="data-transformation.html#cb26-23" aria-hidden="true" tabindex="-1"></a>data_19_region<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2019</span>,<span class="dv">4</span>)</span>
<span id="cb26-24"><a href="data-transformation.html#cb26-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-25"><a href="data-transformation.html#cb26-25" aria-hidden="true" tabindex="-1"></a>data_20_region <span class="ot">&lt;-</span> data_19_20[<span class="dv">36</span><span class="sc">:</span><span class="dv">39</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb26-26"><a href="data-transformation.html#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_20_region) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb26-27"><a href="data-transformation.html#cb26-27" aria-hidden="true" tabindex="-1"></a>data_20_region<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2020</span>,<span class="dv">4</span>)</span>
<span id="cb26-28"><a href="data-transformation.html#cb26-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-29"><a href="data-transformation.html#cb26-29" aria-hidden="true" tabindex="-1"></a>data_15_20_region <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_15_region,data_16_region,data_17_region,data_18_region,data_19_region,data_20_region)</span>
<span id="cb26-30"><a href="data-transformation.html#cb26-30" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_15_20_region,<span class="st">&quot;./data_train/data_15_20_region.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>,<span class="at">col.names=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in write.csv(data_15_20_region, &quot;./data_train/data_15_20_region.csv&quot;, :
## attempt to set &#39;col.names&#39; ignored</code></pre>
<pre><code>## Warning in write.csv(data_15_20_region, &quot;./data_train/data_15_20_region.csv&quot;, :
## attempt to set &#39;sep&#39; ignored</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-transformation.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#education</span></span>
<span id="cb29-2"><a href="data-transformation.html#cb29-2" aria-hidden="true" tabindex="-1"></a>data_19_edu <span class="ot">&lt;-</span> data_19_20[<span class="dv">46</span><span class="sc">:</span><span class="dv">50</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb29-3"><a href="data-transformation.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_19_edu) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Education&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb29-4"><a href="data-transformation.html#cb29-4" aria-hidden="true" tabindex="-1"></a>data_19_edu<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2019</span>,<span class="dv">5</span>)</span>
<span id="cb29-5"><a href="data-transformation.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="data-transformation.html#cb29-6" aria-hidden="true" tabindex="-1"></a>data_20_edu <span class="ot">&lt;-</span> data_19_20[<span class="dv">46</span><span class="sc">:</span><span class="dv">50</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb29-7"><a href="data-transformation.html#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_20_edu) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Education&quot;</span>,<span class="st">&quot;num&quot;</span>,<span class="st">&quot;median_income&quot;</span>)</span>
<span id="cb29-8"><a href="data-transformation.html#cb29-8" aria-hidden="true" tabindex="-1"></a>data_20_edu<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2020</span>,<span class="dv">5</span>)</span>
<span id="cb29-9"><a href="data-transformation.html#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="data-transformation.html#cb29-10" aria-hidden="true" tabindex="-1"></a>data_19_20_edu <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_19_edu,data_20_edu)</span>
<span id="cb29-11"><a href="data-transformation.html#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_19_20_edu,<span class="st">&quot;./data_train/data_19_20_edu.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>,<span class="at">col.names=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in write.csv(data_19_20_edu, &quot;./data_train/data_19_20_edu.csv&quot;, :
## attempt to set &#39;col.names&#39; ignored</code></pre>
<pre><code>## Warning in write.csv(data_19_20_edu, &quot;./data_train/data_19_20_edu.csv&quot;, :
## attempt to set &#39;sep&#39; ignored</code></pre>
<p>In the data_15_16, this data demonstrate income by different factors like household, education, race, etc. All factors show in one row, so we separate the data by each category to analyze how each factor contributes to median_income. In the categorized data set, renaming the columns and adding a new column for the sub-categories. Since data_17_18 and data_19_20 have the same data structure as data_15_16. The transformation process for data_17_18 and data_19_20 applies the same strategy.</p>
</div>
<div id="the-transformation-process-for-shape-of-employment-in-nonagricultural-for-female" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> The transformation process for Shape of Employment in Nonagricultural for Female</h2>
<p>This data was originally collected with neatness. It is easy to figure out that the data shows the employment proportion of females in the nonagricultural industry in three different categories: countries, type of human development and region. First, according to the category, the report splits the original data into three sheets and gives the names emp_fe, hum_dev and region for them. Then, these sheets need simply to delete some un-used rows in excel since it does not require many transformations.hahahahhaahahahaha</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
